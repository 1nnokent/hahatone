<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личная страница участника</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center">Личная страница участника</h1>

        <div class="card mt-3">
            <div class="card-body">
                <h3 id="participant-name">ФИО Участника</h3>
                <p><strong>Класс:</strong> <span id="participant-class"></span></p>
                <p><strong>Регион:</strong> <span id="participant-region"></span></p>
                <p><strong>Школа:</strong> <span id="participant-school"></span></p>
                <p><strong>Итоговый балл:</strong> <span id="final-score"></span></p>
                <p><strong>Итоговое место:</strong> <span id="final-rank"></span></p>
            </div>
        </div>

        <h3 class="mt-4">Результаты по задачам</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Задача</th>
                    <th>Балл</th>
                </tr>
            </thead>
            <tbody id="task-scores">
                <!-- Данные будут добавляться динамически -->
            </tbody>
        </table>

        <h3 class="mt-4">Результаты по турам</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Тур</th>
                    <th>Балл</th>
                    <th>Место</th>
                </tr>
            </thead>
            <tbody id="round-results">
                <!-- Данные будут добавляться динамически -->
            </tbody>
        </table>

        <h3 class="mt-4">График набранных баллов</h3>
        <canvas id="scoreChart"></canvas>
    </div>

    <script>
        const participantData = {
            name: "Иван Иванов",
            class: "11",
            region: "Москва",
            school: "Гимназия №1",
            finalScore: 85,
            finalRank: "10-20",
            taskScores: [10, 9, 8, 10, 10, 9, 8, 10],
            rounds: [
                { round: 1, score: 42, rank: "15-25" },
                { round: 2, score: 43, rank: "10-20" }
            ],
            scoreProgress: [
                { round: 1, points: [ [0, 0], [50, 60], [100, 120], [150, 180], [200, 240], [250, 300] ] },
                { round: 2, points: [ [0, 0], [60, 70], [120, 140], [180, 210], [240, 270], [300, 320] ] }
            ]
        };

        document.getElementById("participant-name").textContent = participantData.name;
        document.getElementById("participant-class").textContent = participantData.class;
        document.getElementById("participant-region").textContent = participantData.region;
        document.getElementById("participant-school").textContent = participantData.school;
        document.getElementById("final-score").textContent = participantData.finalScore;
        document.getElementById("final-rank").textContent = participantData.finalRank;

        const taskScoresTable = document.getElementById("task-scores");
        participantData.taskScores.forEach((score, index) => {
            const row = `<tr><td>Задача ${index + 1}</td><td>${score}</td></tr>`;
            taskScoresTable.innerHTML += row;
        });

        const roundResultsTable = document.getElementById("round-results");
        participantData.rounds.forEach(round => {
            const row = `<tr><td>Тур ${round.round}</td><td>${round.score}</td><td>${round.rank}</td></tr>`;
            roundResultsTable.innerHTML += row;
        });

        const ctx = document.getElementById('scoreChart').getContext('2d');
        const datasets = participantData.scoreProgress.map(round => ({
            label: `Тур ${round.round}`,
            data: round.points.map(([x, y]) => ({ x, y })),
            borderColor: round.round === 1 ? 'blue' : 'red',
            borderWidth: 2,
            fill: false
        }));

        new Chart(ctx, {
            type: 'line',
            data: {
                datasets
            },
            options: {
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Время (минуты)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Баллы'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
